# Appunti del 30 Settembre 2025

## Argomenti di oggi
- JS Engine
- Da cosa è composto un JS Engine

## JS Engine
![alt text](image-1.png)

## Da cosa è composto un JS Engine
- Event Loop: gestisce l'esecuzione del codice, le callback e gli eventi
- Call Stack: struttura dati che tiene traccia delle funzioni attive
- Heap: area di memoria per l'allocazione dinamica
- Web APIs: API fornite dal browser (es. DOM, Fetch)
- Callback Queue: coda delle funzioni callback pronte per essere eseguite
- Microtask Queue: coda per le microtask (es. Promises)

## Esempio
- Come funziona setTimeout
```javascript   
console.log('Inizio');
setTimeout(() => {
    console.log('Timeout');
    }, 0);
console.log('Fine');
```

- Output:
```
Inizio
Fine
Timeout
```                      

Ogni chiamata di funzione crea un execution context che viene inserito nello stack. Quando la funzione termina, il contesto viene rimosso dallo stack.

Quindi, anche se `setTimeout` è impostato a 0 ms, la funzione callback viene messa nella Callback Queue e attende che lo stack sia vuoto prima di essere eseguita.
Poi viene spostata nella Microtask Queue se ci sono microtask in attesa, altrimenti viene eseguita direttamente dalla Callback Queue.
- La Microtask Queue ha priorità sulla Callback Queue, quindi le microtask vengono eseguite prima delle callback normali.
- Questo spiega perché "Timeout" viene stampato per ultimo, anche con un timeout di 0 ms.
